<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "JBoss_Documentation_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="ixf-Interop_XiInclude_Fallbacks">
  <title>xi:include Fallbacks</title>
  <para>To ensure <application>jDocBook</application> can publish the content generated by  <application>Publican</application>, additional XML content is required in your documentation repository.   <application>jDocBook</application> does not have access to the <application>Publican</application> <filename>Common_Content</filename> directory, therefore the required XML files must be included as xi:fallback references in the <filename>preface.xml</filename> and <filename>book_info.xml</filename> files.</para>
  <procedure>
    <title>Obtaining local copies of front-matter XML</title>
    <para>In this procedure, replace the <replaceable>book_name</replaceable> and <replaceable>[username]</replaceable> placeholders with the correct values.</para>
    <para>This procedure assumes you are using a Linux-based operating system,  Publican is installed and correctly configured, and your <replaceable>book_name</replaceable> directory is located in your <filename>home</filename> directory.</para>
    <note>
      <para>The front matter mentioned in this procedure  is also available in the  SVN repository for this project. </para>
      <para><command>svn co http://anonsvn.jboss.org/repos/documentation/JBoss_Documentation_Guide/</command></para>
    </note>
    <step>
      <title>Navigate to the Publican Common_Content directory</title>
      <para>Navigate to the <filename>Common_Content</filename> directory and obtain a directory listing.</para>
      <screen>[localhost]$ cd /usr/share/publican/Common_Content/
[Common_Content]$ ls
common   JBoss_Community</screen>
    </step>
    <step>
      <title>Create the fallback_content directory in your book repository</title>
      <para>Create a <filename>fallback_content</filename> directory in your <filename>book_name/en-US</filename> directory.</para>
      <screen>[Common_Content]$ mkdir /home/<replaceable>[username]</replaceable>/<replaceable>book_name</replaceable>/en-US/fallback_content/</screen>
    </step>
    <step>
      <title>Copy the front matter files into your book repository</title>
      <para>Navigate to the en-US directory of the <filename>/common</filename> directory  and obtain a directory listing.</para>
      <screen>[Common_Content]$ cd /common/en-US/
[Common_Content]$ ls
Conventions.xml   css   Feedback.xml   images  Legal_Notice.xml </screen>
      <para>Copy <filename>Conventions.xml</filename>,  <filename>Feedback.xml</filename> and <filename>Legal_Notice.xml</filename> to your <filename>book_name</filename> directory.</para>
      <screen>[Common_Content]$ cp Conventions.xml Feedback.xml Legal_Notice.xml /home/<replaceable>[username]</replaceable>/<replaceable>book_name</replaceable>/en-US/fallback_content/</screen>
    </step>
  </procedure>
  <note>
    <title>Fallback Content Ownership</title>
    <para>The front-matter information located in the <filename>fallback_content</filename> directory of each user guide is now your project&apos;s responsibility.  You can customize the information to suit your project.</para>
  </note>
  <para>Now you have created local copies of the front-matter to include in your book, you must add the content as XML fallbacks to certain files in your <filename>Preface.xml</filename> and <filename>Book_Info.xml</filename> files.  Refer to <xref linkend="proc-xi_fallbacks"/>   for instructions relating to including xi:fallbacks.  <xref linkend="table-jDocBook_Content"/> describes the fallback files in more detail.</para>
  <table frame="all" pgwide="1" id="table-jDocBook_Content">
    <title>jDocBook Content</title>
    <tgroup cols="3" colsep="1">
      <colspec colnum="1" colname="c0" align="left"/>
      <colspec colnum="2" colname="c1" align="left"/>
      <colspec colnum="3" colname="c2" align="left"/>
      <thead>
        <row>
          <entry align="center">XML Component</entry>
          <entry align="center">Description</entry>
          <entry>Order of Component in the Book</entry>
        </row>
      </thead>
      <tbody>
        <row>
          <entry>
            <filename>Conventions.xml</filename>
          </entry>
          <entry>Contains typographical standards used within the guide. This information is optional, and can be included at the discretion of your project.</entry>
          <entry>Inserted by xi:fallback reference at the middle of the <filename>Preface.xml</filename> file.</entry>
        </row>
        <row>
          <entry>
            <filename>Feedback.xml</filename>
          </entry>
          <entry>Contains information about how to raise a bug against the user documentation. Consider customizing this information to help readers raise issues against your documentation.</entry>
          <entry>Inserted by xi:fallback reference at the end of the <filename>Preface.xml</filename> file.</entry>
        </row>
        <row>
          <entry>
            <filename>Legal_Notice.xml</filename>
          </entry>
          <entry>Contains standardized Red Hat legal information. You can customize this content to suit the legal requirements of your project.</entry>
          <entry>Inserted by xi:fallback reference at the end of the <filename>Book_Info.xml</filename> file</entry>
        </row>
      </tbody>
    </tgroup>
  </table>
  <para>Fallback content is added to each xi:include element that <application>jDocBook</application> does not have access to.  </para>
  <para>DocBook XML allows  any number of xi:fallback elements to be defined for xi:include elements.  It is only necessary to define one fallback for <application>jDocBook</application> and <application>Publican</application> interoperability.</para>
  <procedure id="proc-xi_fallbacks">
    <title>Inserting xi:fallback links</title>
    <para>This example describes how to set xi:fallback links for <application>jDocBook</application> publishes.  The default <application>Publican</application> <filename>Common_Content</filename> files are used for the enterprise documentation. </para>
    <step>
      <title>Open the file that will contain the XML fallback</title>
      <para>Using the information in <xref linkend="table-jDocBook_Content"/>, open the XML file that contains the pre-existing xi:include.</para>
      <para>For example, if you want to include the <filename>Feedback.xml</filename> file in your book, open the <filename>Preface.xml</filename> file in an XML editor of your choice. </para>
    </step>
    <step>
      <title>Locate the xi:include</title>
      <para>In the XML file you opened, search for the xi:include you need to append the xi:fallback to.</para>
      <para>For example, if you want to include the <filename>Feedback.xml</filename> file fallback in your book, perform a search for &quot;Feedback.xml&quot; to locate the xi:include. </para>
    </step>
    <step>
      <title>Append the xi:fallback</title>
      <para>It is up to you and your project which files are included in your documentation.  If you do not want to include a particular file, you  must set a blank  xi:fallback so <application>jDocBook</application> can  publish your book.</para>
      <formalpara>
        <title>For fallbacks that resolve to a fallback file</title>
        <para>Insert the fallback so it resolves to the target file in the <filename>fallback_content</filename> directory.  The structure described in the following XML sample is for the <filename>Legal_Notice.xml</filename> information in the <filename>Book_Info.xml</filename> file.</para>
      </formalpara>
      <programlisting language="XML" role="XML">&lt;!--FOR PUBLICAN --&gt;
&lt;xi:include xmlns:xi=&quot;http://www.w3.org/2001/XInclude&quot;
 href=&quot;Common_Content/Legal_Notice.xml&quot;&gt;
    &lt;!--FOR JDOCBOOK:--&gt;
    &lt;xi:fallback xmlns:xi=&quot;http://www.w3.org/2001/XInclude&quot;&gt;
        &lt;xi:include href=&quot;fallback_content/Legal_Notice.xml&quot;
         xmlns:xi=&quot;http://www.w3.org/2001/XInclude&quot;&gt;&lt;/xi:include&gt;
    &lt;/xi:fallback&gt;
&lt;/xi:include&gt;</programlisting>
      <formalpara>
        <title>For fallbacks that exclude a Common_Content fallback file</title>
        <para>You must still specify how <application>jDocBook</application>  parses front-matter files that you do not want to include in your book.  The xi:fallback is still required, because <application>jDocBook</application> still needs a processing instruction when it encounters the  <filename>Common_Content</filename> files. The structure described in the following XML sample shows how to exclude the <filename>Legal_Notice.xml</filename> information in the <filename>Book_Info.xml</filename> file when you publish to <application>jDocBook</application>.    </para>
      </formalpara>
      <programlisting role="XML">&lt;!--FOR PUBLICAN --&gt;
&lt;xi:include xmlns:xi=&quot;http://www.w3.org/2001/XInclude&quot;
 href=&quot;Common_Content/Legal_Notice.xml&quot;&gt;
    &lt;!--FOR JDOCBOOK:--&gt;
    &lt;xi:fallback xmlns:xi=&quot;http://www.w3.org/2001/XInclude&quot;/&gt;
&lt;/xi:include&gt;</programlisting>
    </step>
  </procedure>
</section>
